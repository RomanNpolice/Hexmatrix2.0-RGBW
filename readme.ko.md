# RGB HexMatrix2.0 RGBW + WifiManager

원본링크 : [HexMatrix2.0](https://www.instructables.com/RGB-HexMatrix-IOT-Clock-20/)

시작에 앞서, 이 코드는 Mukesh sankhla의 작품 HexMatrix2.0의 2차 저작물임을 알립니다.

HexMatrix가 더 멋있어지기 위해, 전력소모를 더 줄이기 위해, 시계의 흰색을 더 Warm하게 바꾸기 위해 RGBW버전으로 개발하게 되었습니다.
또 기존의 펌웨어는 장소를 이동시 Wifi ssid를 펌웨어로 수정 후 업로드 해야 하는 문제가 있었기 때문에 이를 보완하고자 WifiManager로 AP를 잡을 수 있도록 수정해 주었습니다.
SK6812 LED는 기존의 WS2812B를 대체할 수 있는 좋은 재료가 될 것입니다.
기존에 RGB버전으로 제작하셨던 분들이 있을 수 있기 때문에 RGB버전도 제작 하였습니다.

# 제작하기
이 아름다운 HexMatrix를 만들기 위해서는 먼저 3D프린트물과 PCB기판이 필요합니다.
원본링크의 STL파일과(Ring.stl파일은 필요하지 않을 수 있습니다) Gerber파일을 다운로드 받고 3d프린터로 출력, Gerber파일로 PCB를 주문제작 후 빌드 하면 됩니다.
이 작품에는 SK6812 RGBW (또는) RGBNW LED(WS2812B는 열에 약합니다)와 ESP8266 NodeMCU가 필요 합니다. LED는 100개 정도 필요하니 준비 하시면 됩니다.
LED가 납땜하기 좀 어려우니 인두기는 SMD용 칼팁으로 준비해 주시고 테스트로 LED한 개 납땜 후 NodeMCU와 보드를 납땜하고 펌웨어 업을 하여 테스트 진행 해 주기를 권해 드립니다.
펌업 후 인터넷에 접속할 수 있는 기기(노트북, 컴퓨터, 스마트폰 등)로 RGB HexMatrix AP를 잡고 인터넷으로 192.168.4.1로 접속하여 Wifi설정을 해 주시면 됩니다. [링크](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=damtaja&logNo=221168645246)를 통해 WifiManager를 설정해 보시기 바랍니다.
LED가 정상적으로 들어 온다면 나머지 LED도 같은 방법으로 납땜해 줍니다.
LED가 점등되지 않는다면 Wifi AP를 WifiManager를 통해 연결 하였는지 확인 해 주시고 만약 되었다면 전원 해제 후 LED를 180도 뒤집어 납땜해 보시고 다시 시도 하시면 됩니다.
회로를 완성하신 후 NodeMCU 다리를 다 부러뜨린 후 케이스에 붙여 완성하시면 됩니다. 만드는 방법은 최상단 원본링크를 참고 하시면 되겠습니다.

# RGBW 버전으로 개발하게 된 이유
기존에 WS2812B LED는 열에 약한 특성을 가지고 있어 장시간 켜 놓아야 하는 시계의 특성상 불리하다(동작시 LED에서 상당히 많은 열이 나게 됩니다)는 단점을 가지고 있습니다. 따라서 WS2812B의 후속작인 SK6812 LED를 사용할 수 있는 방법(이 LED는 기존의 LED보다 열에 강하고 따라서 납땜시에도 보다 수월하게 작업할 수 있다는 장점이 있습니다)을 찾아 보게 되었습니다. 또한 흰색을 켜야 할 시 R,G,B 3개의 다이오드가 모두 작동하게 되는데 RGBW LED를 사용 시 W 다이오드 하나만 동작하여 보다 전력면에서 효율적입니다(다이오드를 적게 사용하여 동작전류가 낮습니다) 저는 이를 이용하여 RGBNW(좀 더 따뜻한 흰색으로 빛납니다)버전도 제작 하였습니다.

+ 2022.09.03 추가사항
불을 다 끄는 밤과 LED의 과열현상을 막기 위하여 밤 10시부터 led 가 어두워지기 시작하여 11시에 최저밝기가 됩니다.
아침 7시에 정상밝기로 돌아 옵니다.
회사버전을 추가 하였습니다. 점심시간에 식사하고 주무시는 분들을 위하여 정오부터 1시반까지 led가 최저밝기가 됩니다.

+ 2022.10.14 추가사항
최신 버전의 Fastled 사용을 위한 define 구문 추가, Wifi Setting시 Wifi 모양 Led 들어오도록 동작 (디버깅중).
Glitch 제거를 위해 코드 수정
